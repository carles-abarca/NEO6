<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>NEO6 Documentación</title>
  <link rel="stylesheet" href="style.css">
  <script>
    function loadPage(page, el) {
      document.getElementById('content-frame').src = page;
      document.querySelectorAll('#sidebar a').forEach(a => a.classList.remove('active'));
      if (el) el.classList.add('active');
      window.location.hash = page.replace('.html','');
    }
    window.onload = function() {
      let hash = window.location.hash.replace('#','');
      let page = hash ? hash + '.html' : 'intro.html';
      let nav = document.querySelector(`#sidebar a[data-page='${page}']`);
      loadPage(page, nav || document.getElementById('nav-intro'));
    };
    window.onhashchange = function() {
      let hash = window.location.hash.replace('#','');
      let page = hash ? hash + '.html' : 'intro.html';
      let nav = document.querySelector(`#sidebar a[data-page='${page}']`);
      loadPage(page, nav || document.getElementById('nav-intro'));
    };
  </script>
</head>
<body>
  <div id="container">
    <nav id="sidebar">
      <div class="logo">
        <img src="neo6.png" alt="NEO6 logo">
      </div>
      <ul>
        <li><a href="#" id="nav-intro" class="section" data-page="intro.html" onclick="loadPage('intro.html', this);return false;">Introducción</a></li>
        <li><a href="#" class="section" data-page="architecture.html" onclick="loadPage('architecture.html', this);return false;">Arquitectura General</a></li>
        <li><a href="#" class="section" data-page="devguide.html" onclick="loadPage('devguide.html', this);return false;">Contribución</a></li>
        <li><a href="#" class="section" data-page="deploy.html" onclick="loadPage('deploy.html', this);return false;">Despliegue de NEO6-proxy</a></li>
        <li><a href="#" class="section" data-page="transactions.html" onclick="loadPage('transactions.html', this);return false;">Configuración de transacciones disponibles</a></li>
        <li><a href="#" class="section" data-page="invocation.html" onclick="loadPage('invocation.html', this);return false;">Cómo invocar transacciones</a></li>
        <li><a href="#" class="section">Módulos</a>
          <ul>
            <li><a href="#" data-page="proxy.html" onclick="loadPage('proxy.html', this);return false;">Proxy</a></li>
            <li><a href="#" data-page="protocols.html" onclick="loadPage('protocols.html', this);return false;">Protocolos</a>
              <ul>
                <li><a href="#" onclick="loadPage('protocol-lu62.html', this);return false;">LU6.2 / APPC</a></li>
                <li><a href="#" onclick="loadPage('protocol-mq.html', this);return false;">IBM MQ</a></li>
                <li><a href="#" onclick="loadPage('protocol-rest.html', this);return false;">REST</a></li>
                <li><a href="#" onclick="loadPage('protocol-tcp.html', this);return false;">TCP/IP Proprietary</a></li>
                <li><a href="#" onclick="loadPage('protocol-jca.html', this);return false;">JCA / CICS TG</a></li>
              </ul>
            </li>
          </ul>
        </li>
      </ul>
    </nav>
    <main id="main">
      <iframe id="content-frame" src="" frameborder="0" style="width:100%;height:100vh;background:#fff;"></iframe>
    </main>
  </div>
  <script>
    // Sidebar collapsible logic
    function toggleCollapse(el) {
      const parentLi = el.parentElement;
      parentLi.classList.toggle('collapsed');
      const subUl = parentLi.querySelector('ul');
      if (subUl) {
        subUl.style.display = parentLi.classList.contains('collapsed') ? 'none' : 'block';
      }
    }
    window.addEventListener('DOMContentLoaded', function() {
      // Initialize all submenus as expanded
      document.querySelectorAll('#sidebar ul ul').forEach(ul => {
        ul.style.display = 'block';
      });
      // Add collapse toggles
      document.querySelectorAll('#sidebar li > a.section, #sidebar li > a[data-page]').forEach(a => {
        const li = a.parentElement;
        if (li.querySelector('ul')) {
          a.classList.add('collapsible');
          a.onclick = function(e) {
            if (e.target === a && e.offsetX < 20) { // click near left
              toggleCollapse(a);
              e.preventDefault();
              return false;
            }
          };
        }
      });
    });
  </script>
</body>
</html>
